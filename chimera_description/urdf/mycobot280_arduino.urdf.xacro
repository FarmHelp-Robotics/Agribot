<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="$(find chimera_description)/urdf/inertial.xacro"/>
  <xacro:include filename="$(find chimera_description)/urdf/gripper.urdf.xacro"/>  
  
  <xacro:macro name="my_cobot_arm" params="moving_base_link originxyz originrpy">
    <link name="link1">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link1.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link1.dae"/>
        </geometry>
        <origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </collision>
      <xacro:hcylinder_inertial m="0.75" r="0.05" h="0.07"/>
    </link>

    <link name="link2">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </collision>
      <xacro:hcylinder_inertial m="0.2" r="0.05" h="0.08"/>
    </link>

    <link name="link3">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.4" r="0.05" h="0.155"/>
    </link>

    <link name="link4">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.4" r="0.05" h="0.155"/>
    </link>

    <link name="link5">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.2" r="0.05" h="0.05"/>
    </link>

    <link name="link6">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.5" r="0.05" h="0.06"/>
    </link>
    
     <link name="camera_link">
      <visual>
        <geometry>
          <box size="0.03 0.02 0.03"/> <!-- Dimensions of the camera box -->
        </geometry>
        <origin xyz="0 0 0.0" rpy="0 0 1.54"/> <!-- Position and orientation of the camera -->
      </visual>
      <collision>
        <geometry>
          <box size="0.03 0.02 0.03"/> <!-- Dimensions of the camera box -->
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 1.54"/> <!-- Position and orientation of the camera -->
      </collision>
    </link>

    <joint name="wrist_to_camera_joint" type="fixed">
      <parent link="link6"/>
      <child link="camera_link"/>
      <origin xyz="0 0.025 0.04" rpy="0 0 1.54"/> <!-- Position and orientation of the camera relative to the wrist -->
    </joint>

    <link name="wrist_link">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/wrist.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/wrist.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.02" h="0.005"/>
    </link>
    
    <xacro:gripper wrist_link="wrist_link"
		   originxyz="0.0 0.012 0.027" originrpy="1.570796 3.14159 0"/>
    
    <joint name="arm_to_baselink" type="fixed">
      <parent link="${moving_base_link}"/>
      <child link="link1"/>
      <origin xyz="${originxyz}" rpy="${originrpy}"/>
    </joint>

    <joint name="joint21" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-2.8" upper = "2.8" velocity = "0.1"/>
      <parent link="link1"/>
      <child link="link2"/>
      <origin xyz= "0 0 0.13156" rpy = "0 0 1.5708"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <joint name="joint32" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-2.8" upper = "2.8" velocity = "0.25"/>
      <parent link="link2"/>
      <child link="link3"/>
      <origin xyz= "0 0  0" rpy = "0 1.5708 -1.5708"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <joint name="joint43" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-2.8" upper = "2.8" velocity = "0.25"/>
      <parent link="link3"/>
      <child link="link4"/>
      <origin xyz= "  -0.1104 0 0   " rpy = "0 0 0"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <joint name="joint54" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-2.8" upper = "2.8" velocity = "0.25"/>
      <parent link="link4"/>
      <child link="link5"/>
      <origin xyz= "-0.096 0 0.06462" rpy = "0 0 -1.5708"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <joint name="joint65" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-2.8" upper = "2.8" velocity = "0.25"/>
      <parent link="link5"/>
      <child link="link6"/>
      <origin xyz= "0 -0.07318 0" rpy = "1.5708 -1.5708 0"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <joint name="wrist_joint" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.05" upper = "3.05" velocity = "0.25"/>
      <parent link="link6"/>
      <child link="wrist_link"/>
      <origin xyz= "0 0.0456 0" rpy = "-1.5708 0 0"/>
      <dynamics damping="1.0e-6" friction="2.0e-1" />
    </joint>

    <transmission name="trans_joint21">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint21">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="joint21_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission> 
    <transmission name="trans_joint32">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint32">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="joint32_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
    <transmission name="trans_joint43">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint43">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="joint43_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
    <transmission name="trans_joint54">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint54">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="joint54_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
    <transmission name="trans_joint65">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="joint65">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="joint65_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
    <transmission name="trans_wrist_joint">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="wrist_joint">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="wrist_joint_motor">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
  </xacro:macro>

</robot>
