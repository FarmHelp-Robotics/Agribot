<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="$(find chimera_description)/urdf/inertial.xacro"/>  

  <xacro:macro name="my_cobot_arm" params="moving_base_link originxyz originrpy">
    <link name="joint1">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint1.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint1.dae"/>
        </geometry>
        <origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </collision>
      <xacro:box_inertial m="0.25" w="0.1" d="0.1" h="0.1"/>
    </link>

    <link name="joint2">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.025" h="0.087"/>
    </link>

    <link name="joint3">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.2" r="0.03" h="0.155"/>
    </link>

    <link name="joint4">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.18" r="0.0275" h="0.136"/>
    </link>

    <link name="joint5">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.0275" h="0.06"/>
    </link>


    <link name="joint6">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.018" h="0.06"/>
    </link>

    <link name="joint6_flange">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint7.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/joint7.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.05" r="0.018" h="0.02"/>
    </link>
    
    <joint name="arm_to_baselink" type="fixed">
      <parent link="${moving_base_link}"/>
      <child link="joint1"/>
      <origin xyz="${originxyz}" rpy="${originrpy}"/>
    </joint>

    <joint name="joint2_to_joint1" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint1"/>
      <child link="joint2"/>
      <origin xyz= "0 0 0.13156" rpy = "0 0 1.5708"/>  
    </joint>

    <joint name="joint3_to_joint2" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint2"/>
      <child link="joint3"/>
      <origin xyz= "0 0  0" rpy = "0 1.5708 -1.5708"/>  
    </joint>

    <joint name="joint4_to_joint3" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint3"/>
      <child link="joint4"/>
      <origin xyz= "  -0.1104 0 0   " rpy = "0 0 0"/>  
    </joint>
    
    <joint name="joint5_to_joint4" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint4"/>
      <child link="joint5"/>
      <origin xyz= "-0.096 0 0.06462" rpy = "0 0 -1.5708"/>  
    </joint>

    <joint name="joint6_to_joint5" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint5"/>
      <child link="joint6"/>
      <origin xyz= "0 -0.07318 0" rpy = "1.5708 -1.5708 0"/>  
    </joint>
    
    <joint name="joint6output_to_joint6" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="joint6"/>
      <child link="joint6_flange"/>
      <origin xyz= "0 0.0456 0" rpy = "-1.5708 0 0"/>  
    </joint>

  </xacro:macro>
</robot>
