<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="$(find chimera_description)/urdf/inertial.xacro"/>  

  <xacro:macro name="my_cobot_arm" params="moving_base_link originxyz originrpy">
    <link name="link1">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link1.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link1.dae"/>
        </geometry>
        <origin xyz = "0.0 0 0 " rpy = " 0 0 3.14159"/>
      </collision>
      <xacro:box_inertial m="0.25" w="0.1" d="0.1" h="0.1"/>
    </link>

    <link name="link2">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link2.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.06096 " rpy = " 0 0 -1.5708"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.025" h="0.087"/>
    </link>

    <link name="link3">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link3.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03256 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.2" r="0.03" h="0.155"/>
    </link>

    <link name="link4">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link4.dae"/>
	</geometry>
	<origin xyz = "0.0 0 0.03056 " rpy = " 0 -1.5708 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.18" r="0.0275" h="0.136"/>
    </link>

    <link name="link5">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link5.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.03356 " rpy = " -1.5708 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.0275" h="0.06"/>
    </link>


    <link name="link6">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/link6.dae"/>
	</geometry>
	<origin xyz = "0 0.00 -0.038 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.1" r="0.018" h="0.06"/>
    </link>

    <link name="end_effector_link">
      <visual>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/end_effector.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </visual>
      <collision>
	<geometry>
	  <mesh filename="package://chimera_description/meshes/end_effector.dae"/>
	</geometry>
	<origin xyz = "0.0 0 -0.012 " rpy = " 0 0 0"/>
      </collision>
      <xacro:hcylinder_inertial m="0.05" r="0.018" h="0.02"/>
    </link>
    
    <joint name="arm_to_baselink" type="fixed">
      <parent link="${moving_base_link}"/>
      <child link="link1"/>
      <origin xyz="${originxyz}" rpy="${originrpy}"/>
    </joint>

    <joint name="joint21" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link1"/>
      <child link="link2"/>
      <origin xyz= "0 0 0.13156" rpy = "0 0 1.5708"/>  
    </joint>

    <joint name="joint32" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link2"/>
      <child link="link3"/>
      <origin xyz= "0 0  0" rpy = "0 1.5708 -1.5708"/>  
    </joint>

    <joint name="joint43" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link3"/>
      <child link="link4"/>
      <origin xyz= "  -0.1104 0 0   " rpy = "0 0 0"/>  
    </joint>
    
    <joint name="joint54" type="revolute">
      <axis xyz=" 0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link4"/>
      <child link="link5"/>
      <origin xyz= "-0.096 0 0.06462" rpy = "0 0 -1.5708"/>  
    </joint>

    <joint name="joint65" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link5"/>
      <child link="link6"/>
      <origin xyz= "0 -0.07318 0" rpy = "1.5708 -1.5708 0"/>  
    </joint>
    
    <joint name="end_effector_joint" type="revolute">
      <axis xyz="0 0 1"/>
      <limit effort = "1000.0" lower = "-3.14" upper = "3.14159" velocity = "0"/>
      <parent link="link6"/>
      <child link="end_effector_link"/>
      <origin xyz= "0 0.0456 0" rpy = "-1.5708 0 0"/>  
    </joint>

  </xacro:macro>
</robot>
